import{j as e}from"./ui-vendor-BwlLg9O9.js";import{C as o,a as x,c as h,d as u,b as N}from"./card-B87lmAsb.js";import{B as j}from"./badge-BSpsjrqz.js";import{a as b,B as S}from"./index-DvB6HgzU.js";import{u as w,r as a}from"./react-vendor-BV8CqAlW.js";import{M as y}from"./manage-schemes-modal-DMLno14B.js";import{f as C}from"./currency-DQnJccph.js";import{s as M}from"./utils-vendor-BEyFXcp4.js";import"./input-CqLO7V2k.js";import"./label-_J7CDay_.js";function H(){const p=w(),[f,d]=a.useState(!1),[g,v]=a.useState([]),[i,l]=a.useState(!1),[n,m]=a.useState(null);return a.useEffect(()=>{let s=!0;return l(!0),m(null),b.get("/api/core/analytics/schemes/overview/").then(t=>{s&&v(t)}).catch(t=>{s&&m(t.message||"Failed to load schemes")}).finally(()=>{s&&l(!1)}),()=>{s=!1}},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-end justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Schemes"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Explore scheme performance and utilization."})]}),e.jsxs(S,{onClick:()=>d(!0),children:[e.jsx(M,{className:"h-4 w-4 mr-2"})," Manage Schemes"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:[i&&[0,1,2].map(s=>e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-4 w-24 animate-pulse rounded bg-muted"}),e.jsx(j,{variant:"info",children:"Loading…"})]}),e.jsx(h,{children:e.jsx("span",{className:"inline-block h-3 w-48 animate-pulse rounded bg-muted"})})]}),e.jsxs(u,{className:"space-y-3",children:[e.jsx("div",{className:"h-2 rounded bg-muted"}),e.jsx("div",{className:"h-2 rounded bg-muted"}),e.jsx("div",{className:"h-2 rounded bg-muted"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:" "})]})]},`shimmer-${s}`)),!i&&n&&e.jsx("div",{className:"col-span-full text-sm text-destructive",children:n}),!i&&!n&&g.map((s,t)=>e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{children:s.name}),e.jsxs(j,{variant:"info",children:["Utilization ",Math.round(s.utilization_percent),"%"]})]}),e.jsxs(h,{children:[s.members_count.toLocaleString()," members • Scheme value ",C(s.price||0)]})]}),e.jsxs(u,{className:"space-y-3",children:[s.breakdown.slice(0,3).map((r,c)=>e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:r.name}),e.jsxs("span",{children:[Math.round(r.percent),"%"]})]}),e.jsx("div",{className:"h-2 rounded bg-muted",children:e.jsx("div",{className:`h-2 rounded ${c===0?"bg-accent":c===1?"bg-success":"bg-warning"}`,style:{width:`${Math.min(100,Math.max(0,r.percent))}%`}})})]},r.name+c)),e.jsx("div",{className:"text-xs text-accent underline cursor-pointer",onClick:()=>p(`/schemes/${s.id}`),children:"Open details"})]})]},s.id))]}),e.jsx(y,{open:f,onOpenChange:d})]})}export{H as default};
