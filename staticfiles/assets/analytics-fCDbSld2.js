import{j as e}from"./ui-vendor-BwlLg9O9.js";import{C as a,d as r,a as d,b as f,c as g}from"./card-B87lmAsb.js";import{S as i}from"./skeleton-CR7iafWw.js";import{r as l}from"./react-vendor-BV8CqAlW.js";import{a as N}from"./index-DvB6HgzU.js";import{f as m}from"./currency-DQnJccph.js";import{l as S,C as z,D as M,m as T}from"./utils-vendor-BEyFXcp4.js";function U(){const[c,v]=l.useState([]),[y,b]=l.useState([]),[w,o]=l.useState(!0),[x,h]=l.useState(null);if(l.useEffect(()=>{(async()=>{try{o(!0),h(null);const[t,A]=await Promise.all([N.get("/api/core/analytics/members/"),N.get("/api/core/analytics/schemes/overview/")]);v(t.results),b(A)}catch(t){console.error("Error fetching analytics:",t),h("Failed to load analytics data")}finally{o(!1)}})()},[]),w)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Analytics"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Charts and KPIs highlighting utilization and performance."})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((s,t)=>e.jsx(a,{children:e.jsxs(r,{className:"p-6",children:[e.jsx(i,{className:"h-8 w-20 mb-2"}),e.jsx(i,{className:"h-4 w-16"})]})},t))}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:Array.from({length:2}).map((s,t)=>e.jsxs(a,{children:[e.jsxs(d,{children:[e.jsx(i,{className:"h-6 w-32"}),e.jsx(i,{className:"h-4 w-48"})]}),e.jsx(r,{children:e.jsx(i,{className:"h-64 w-full"})})]},t))})]});if(x)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Analytics"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Charts and KPIs highlighting utilization and performance."})]}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsx("div",{className:"text-center text-destructive",children:x})})})]});const n=(c||[]).length,j=(c||[]).reduce((s,t)=>s+(t.total_claims||0),0),C=(c||[]).reduce((s,t)=>s+(t.approved_amount||0),0),_=n>0?(j/n).toFixed(1):"0",u=[...c||[]].sort((s,t)=>t.approved_amount-s.approved_amount).slice(0,10),p=[...y||[]].sort((s,t)=>t.utilization_percent-s.utilization_percent).slice(0,10);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Analytics"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Charts and KPIs highlighting utilization and performance."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Members"}),e.jsx("p",{className:"text-2xl font-bold",children:n})]}),e.jsx(S,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Claims"}),e.jsx("p",{className:"text-2xl font-bold",children:j})]}),e.jsx(z,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold",children:m(C)})]}),e.jsx(M,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Claims/Member"}),e.jsx("p",{className:"text-2xl font-bold",children:_})]}),e.jsx(T,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs(a,{children:[e.jsxs(d,{children:[e.jsx(f,{children:"Top Members by Claim Value"}),e.jsx(g,{children:"Members with highest approved claim amounts"})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-3",children:[u.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs font-medium text-muted-foreground w-6",children:["#",t+1]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.member}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.scheme})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:m(s.approved_amount)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.total_claims," claims"]})]})]},s.member_id)),u.length===0&&e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No member data available"})]})})]}),e.jsxs(a,{children:[e.jsxs(d,{children:[e.jsx(f,{children:"Scheme Utilization"}),e.jsx(g,{children:"Schemes ranked by utilization rate"})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-3",children:[p.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs font-medium text-muted-foreground w-6",children:["#",t+1]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.members_count," members"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[s.utilization_percent.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:m(s.total_amount_30d)})]})]},s.id)),p.length===0&&e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No scheme data available"})]})})]})]})]})}export{U as default};
