import{j as s}from"./ui-vendor-BwlLg9O9.js";import{r as t,u as b,d as y}from"./react-vendor-BV8CqAlW.js";import{C as S,a as N,b as L,c as A,d as k}from"./card-B87lmAsb.js";import{I as h}from"./input-CqLO7V2k.js";import{L as x}from"./label-_J7CDay_.js";import{u as D,k as E,B as U,l as q,m as B}from"./index-DvB6HgzU.js";import"./utils-vendor-BEyFXcp4.js";function $(){var m,u;const[r,f]=t.useState(""),[n,g]=t.useState(""),[o,i]=t.useState(!1),[c,l]=t.useState(null),{setUser:j}=D(),v=b(),w=((u=(m=y().state)==null?void 0:m.from)==null?void 0:u.pathname)||"/",d=E();async function C(a){a.preventDefault(),l(null),i(!0);try{await q(r.trim(),n);const e=await B();j(e),d.success("Signed in",{description:`Welcome back, ${e.username}`}),v(w,{replace:!0})}catch(e){const p=(e==null?void 0:e.message)||"Login failed";l(p),d.error("Login failed",{description:p})}finally{i(!1)}}return s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:s.jsxs(S,{className:"w-full max-w-sm",children:[s.jsxs(N,{children:[s.jsx(L,{children:"Sign in"}),s.jsx(A,{children:"Access the Alo‑Medical Admin Dashboard"})]}),s.jsx(k,{children:s.jsxs("form",{onSubmit:C,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(x,{htmlFor:"username",children:"Username"}),s.jsx(h,{id:"username",value:r,onChange:a=>f(a.target.value),autoComplete:"username",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(x,{htmlFor:"password",children:"Password"}),s.jsx(h,{id:"password",type:"password",value:n,onChange:a=>g(a.target.value),autoComplete:"current-password",required:!0})]}),c&&s.jsx("div",{className:"text-sm text-destructive",children:c}),s.jsx(U,{type:"submit",className:"w-full",disabled:o,children:o?"Signing in…":"Sign in"})]})})]})})}export{$ as default};
