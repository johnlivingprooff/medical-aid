import{j as e}from"./ui-vendor-BwlLg9O9.js";import{C as a,d as r,a as g,b as v}from"./card-B87lmAsb.js";import{u as A,B as x,a as d}from"./index-DvB6HgzU.js";import{r as o}from"./react-vendor-BV8CqAlW.js";import{B as y}from"./badge-BSpsjrqz.js";import{S as h}from"./skeleton-CR7iafWw.js";import{l as j,N as D,O as S,T as C}from"./utils-vendor-BEyFXcp4.js";function B(){const{user:l}=A(),[s,p]=o.useState(null),[m,u]=o.useState(!0),[f,N]=o.useState(null);o.useEffect(()=>{const c=async()=>{var n,t;try{u(!0),N(null);const i=await d.get("/api/core/admin/stats/");p(i)}catch(i){console.error("Error fetching admin stats:",i),N(((t=(n=i==null?void 0:i.response)==null?void 0:n.data)==null?void 0:t.error)||i.message||"Failed to load admin data")}finally{u(!1)}};(l==null?void 0:l.role)==="ADMIN"&&c()},[l]);const b=async()=>{var c,n;if(window.confirm("Are you sure you want to reset all demo data? This action cannot be undone."))try{const t=await d.post("/api/core/admin/actions/",{action:"reset_demo_data"});if(alert(t.message||"Demo data reset completed successfully"),(l==null?void 0:l.role)==="ADMIN"){const i=await d.get("/api/core/admin/stats/");p(i)}}catch(t){console.error("Error resetting data:",t),alert(((n=(c=t==null?void 0:t.response)==null?void 0:c.data)==null?void 0:n.error)||"Failed to reset demo data")}},w=async()=>{var c,n;try{const t=await d.post("/api/core/admin/actions/",{action:"export_data"});alert(t.message||"Data export completed successfully")}catch(t){console.error("Error exporting data:",t),alert(((n=(c=t==null?void 0:t.response)==null?void 0:c.data)==null?void 0:n.error)||"Failed to export data")}},_=async()=>{var c,n;try{const t=await d.post("/api/core/admin/actions/",{action:"generate_reports"});alert(t.message||"Reports generated successfully")}catch(t){console.error("Error generating reports:",t),alert(((n=(c=t==null?void 0:t.response)==null?void 0:c.data)==null?void 0:n.error)||"Failed to generate reports")}};return(l==null?void 0:l.role)!=="ADMIN"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Admin"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Access denied."})]}),e.jsx(a,{children:e.jsx(r,{className:"p-6 text-center",children:e.jsx("div",{className:"text-destructive",children:"You don't have permission to access this page."})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Admin"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"System administration and management tools."})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:m?Array.from({length:4}).map((c,n)=>e.jsx(a,{children:e.jsxs(r,{className:"p-6",children:[e.jsx(h,{className:"h-8 w-20 mb-2"}),e.jsx(h,{className:"h-4 w-16"})]})},n)):e.jsxs(e.Fragment,{children:[e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold",children:(s==null?void 0:s.total_users)||0})]}),e.jsx(j,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Patients"}),e.jsx("p",{className:"text-2xl font-bold",children:(s==null?void 0:s.total_patients)||0})]}),e.jsx(j,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Providers"}),e.jsx("p",{className:"text-2xl font-bold",children:(s==null?void 0:s.total_providers)||0})]}),e.jsx(j,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Claims"}),e.jsx("p",{className:"text-2xl font-bold",children:(s==null?void 0:s.total_claims)||0})]}),e.jsx(D,{className:"h-8 w-8 text-muted-foreground"})]})})})]})}),!m&&(s==null?void 0:s.claim_stats)&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:s.claim_stats.pending}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.claim_stats.approved}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:s.claim_stats.rejected}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejected"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.claim_stats.processing}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Processing"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:s.claim_stats.investigating}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Investigating"})]})})})]}),e.jsxs(a,{children:[e.jsx(g,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"System Health"]})}),e.jsx(r,{children:m?e.jsx(h,{className:"h-8 w-32"}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{variant:(s==null?void 0:s.system_health)==="healthy"?"success":(s==null?void 0:s.system_health)==="warning"?"warning":"destructive",children:(s==null?void 0:s.system_health)==="healthy"?"All Systems Operational":(s==null?void 0:s.system_health)==="warning"?"Minor Issues Detected":"Critical Issues"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Last checked: ",new Date().toLocaleTimeString()]})]}),(s==null?void 0:s.database_status)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Database:"}),e.jsx(y,{variant:s.database_status==="connected"?"success":"destructive",children:s.database_status})]}),(s==null?void 0:s.recent_claims)!==void 0&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Recent activity: ",s.recent_claims," new claims since last login"]})]})})]}),e.jsxs(a,{children:[e.jsx(g,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Admin Actions"]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Data Management"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Export System Data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Generate CSV export of all system data"})]}),e.jsx(x,{variant:"outline",size:"sm",onClick:w,children:"Export"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Generate Reports"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Create comprehensive system reports"})]}),e.jsx(x,{variant:"outline",size:"sm",onClick:_,children:"Generate"})]})]})]}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-destructive",children:"Danger Zone"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Reset Demo Data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset all demo data and rebuild analytics. Irreversible in production."})]}),e.jsx(x,{variant:"destructive",size:"sm",onClick:b,children:"Reset & Rebuild"})]})})]})]})]}),f&&e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsx("div",{className:"text-center text-destructive",children:f})})})]})}export{B as default};
